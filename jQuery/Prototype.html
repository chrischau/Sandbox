<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <!-- <script src="jquery-3.5.1.min.js"></script> -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    function GetAPIData() {
      var divShowData = $('#divShowData');
      var apiAddress = "http://localhost/NWMCustomAPI-Publish/api/v1/margincalls/";
      var marginCallId = 629315;

      console.log("Calling AJAX to GET API");

      divShowData.text("");

      // $.ajax({
      //   dataType: 'json',
      //   type: 'GET',
      //   url: apiAddress + marginCallId,
      //   //data: {marginCallId}, 
      //   success: (result) => {
      //     $.each(result, (fieldName, fieldValue) => {
      //       divShowData.append(fieldName + " - " + fieldValue + "<br>");
      //     });
      //     console.log(result)
      //   },
      //   error: () => {
      //     alert("json not found");
      //   }
      // });

      $.getJSON(apiAddress + marginCallId, (result) => {
        $.each(result, (fieldName, fieldValue) => {
          divShowData.append(fieldName + " - " + fieldValue + "<br>");
        });

        console.log(result);
      });

      console.log("Finished AJAX to GET API");
    }

    $(document).ready(() => {
      //$('#buttonGetData').click(() => { GetAPIData() });
      GetAPIData();
    });

  </script>
</head>

<body>

  <!-- <button id="buttonGetData">Find Margin Call</button> -->

  <div id="divShowData">Show Data Here</div>

</body>

</html>